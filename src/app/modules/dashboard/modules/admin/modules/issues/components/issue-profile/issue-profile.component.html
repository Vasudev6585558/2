<button mat-icon-button (click)="goBack()" class="floating-back-button">
  <mat-icon>keyboard_backspace</mat-icon>
</button>
<div *ngIf="!issueDoesNotExist; else issueDoesNotExistTemplate">
  <span *ngIf="!(isFetchingIssue$ | async)">
    <div class="issue-card">
      <button
        *ngIf="authorizeResourceMethod(resourceActions.DELETE)"
        mat-mini-fab
        color="warn"
        class="profile-button"
        (click)="deleteConfirmation()"
      >
        <mat-icon>delete</mat-icon>
      </button>
      <button
        *ngIf="authorizeResourceMethod(resourceActions.UPDATE)"
        mat-mini-fab
        color="info"
        [class.button-loading]="isFetchingIssue$ | async"
        class="profile-button"
        (click)="editIssue()"
      >
        <mat-icon>edit</mat-icon>
      </button>

      <h2>{{ issue.link }}</h2>
      <p>
        <a
          [href]="issue.link"
          alt="issue link"
          target="_blank"
          rel="noopener noreferrer nofollow"
          >{{ issue.link }}</a
        >
      </p>
      <p>{{ clip(issue?.description) }}</p>

      <small style="font-style: italic">{{ renderIssueSubtitle(issue) }}</small>
    </div>
  </span>
</div>

<ng-template #loading>
  <app-simple-loading-spinner></app-simple-loading-spinner>
</ng-template>

<ng-template #issueDoesNotExistTemplate>
  <div *ngIf="!(isFetchingIssue$ | async); else loading">
    <h2 id="issue-not-found">Issue not found!</h2>
  </div>
</ng-template>
