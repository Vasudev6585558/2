<div *ngIf="!userDoesNotExist; else userDoesNotExistTemplate">
  <button mat-icon-button (click)="goBack()" class="floating-back-button">
    <mat-icon>keyboard_backspace</mat-icon>
  </button>

  <mat-card class="member-card">
    <button
      mat-mini-fab
      color="info"
      class="profile-button"
      *ngIf="allowProfileEdit()"
      (click)="editMember()"
    >
      <mat-icon>edit</mat-icon>
    </button>
    <div>
      <img [src]="member.avatar" class="avatar" alt="profile pic" />
    </div>
    <h2 style="text-align: left">
      {{ member.name }}
    </h2>

    <mat-card-content>
      <p>
        {{ member.title }},
        <span *ngIf="member?.institution?.name">{{
          member?.institution?.name
        }}</span>
      </p>
      <p>
        {{ member.bio }}
      </p>
    </mat-card-content>
  </mat-card>
  <br />
  <h2>Courses</h2>
  <span *ngIf="courses.length > 0; else noCourses">
    <div *ngFor="let card of courses">
      <mat-card class="feed-card">
        <h2 style="text-align: left">{{ card.course?.title }}</h2>
        <div style="display: inline">
          <div class="color-legend">
            <p><span class="color-legend-circle-completed"></span> Completed</p>
            <p><span class="color-legend-circle-percentage"></span> Score</p>
          </div>
          <svg viewBox="0 0 36 36" class="card-percentage">
            <path
              class="percentage-circle"
              attr.stroke-dasharray="{{ card.percentage }}, 100"
              d="M18 2.0845
      a 15.9155 15.9155 0 0 1 0 31.831
      a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <text x="18" y="20.35" class="percentage">
              {{ card.percentage }}%
            </text>
          </svg>
          <svg viewBox="0 0 36 36" class="card-completed">
            <path
              class="completed-circle"
              attr.stroke-dasharray="{{ card.completed }}, 100"
              d="M18 2.0845
      a 15.9155 15.9155 0 0 1 0 31.831
      a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <text x="18" y="20.35" class="completed">
              {{ card.completed }}%
            </text>
          </svg>
        </div>
        <p>
          <small *ngIf="card.updatedAt"
            >Last active on
            {{ parseDate(card.updatedAt) }}
          </small>
        </p>
      </mat-card>
    </div>
  </span>
</div>

<!-- <ng-template #loading>
  <app-simple-loading-spinner></app-simple-loading-spinner>
</ng-template> -->

<ng-template #userDoesNotExistTemplate>
  <div *ngIf="!(isFetchingFormRecord$ | async); else loading">
    <h2 id="user-not-found">User not found!</h2>
  </div>
</ng-template>

<ng-template #loading>
  <app-simple-loading-spinner></app-simple-loading-spinner>
</ng-template>

<ng-template #noCourses>
  <p style="text-align: center">
    {{ member.name }} is not a part of any courses
  </p>
</ng-template>
