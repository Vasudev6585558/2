<div class="feed-header-block">
  <h2>Announcements</h2>
  <button
    *ngIf="authorizeResourceMethod(resourceActions.CREATE)"
    (click)="createAnnouncement()"
    class="floating-header-button-top"
    mat-raised-button
    color="primary"
  >
    Create Announcement
  </button>
</div>
<span *ngIf="authorizeResourceMethod(resourceActions.LIST)">
  <span *ngIf="!(isFetching$ | async); else loading">
    <span *ngIf="(announcements$ | async).length > 0; else feedEmpty">
      <div *ngFor="let announcement of announcements$ | async">
        <span class="feed-card" (click)="openAnnouncement(announcement)">
          <h2>{{ announcement.title }}</h2>
          <p>{{ clip(announcement.message) }}</p>
          <small style="font-style: italic"
            >Posted by {{ announcement?.author?.firstName }}
            {{ announcement?.author?.lastName }} at
            {{ parseDate(announcement.createdAt) }}</small
          >
        </span>
      </div>
    </span>
  </span>

  <ng-template #feedEmpty>
    <p class="center-title">There are no announcements for you!</p>
  </ng-template>

  <ng-template #loading>
    <app-simple-loading-spinner></app-simple-loading-spinner>
  </ng-template>
</span>
